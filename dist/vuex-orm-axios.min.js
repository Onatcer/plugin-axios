!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VuexORMAxios=e()}(this,function(){"use strict";var o=function(){return(o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function t(r,s,u,a){return new(u=u||Promise)(function(t,e){function n(t){try{i(a.next(t))}catch(t){e(t)}}function o(t){try{i(a.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new u(function(t){t(e.value)}).then(n,o)}i((a=a.apply(r,s||[])).next())})}function r(n,o){var i,r,s,t,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,r=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=o.call(n,u)}catch(t){e=[6,t],r=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var s=function(t,e,n,o){this.model=t,this.config=e,this.response=n,this.entities=o},n=(Object.defineProperty(e.prototype,"axios",{get:function(){if(!this.model.axios)throw new Error("[Vuex ORM Axios] The axios instance is not registered. Please register the axios instance to the model.");return this.model.axios},enumerable:!0,configurable:!0}),e.prototype.registerActions=function(){var t=this.model.apiConfig.actions;if(t)for(var e in t){var n=t[e];"function"==typeof n?this.registerFunctionAction(e,n):this.registerObjectAction(e,n)}},e.prototype.registerObjectAction=function(t,e){var n=this;this[t]=function(t){return n.request(o(o({},e),t))}},e.prototype.registerFunctionAction=function(t,e){this[t]=e.bind(this)},e.prototype.get=function(t,e){return void 0===e&&(e={}),this.request(o({method:"get",url:t},e))},e.prototype.post=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this.request(o({method:"post",url:t,data:e},n))},e.prototype.put=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this.request(o({method:"put",url:t,data:e},n))},e.prototype.patch=function(t,e,n){return void 0===e&&(e={}),void 0===n&&(n={}),this.request(o({method:"patch",url:t,data:e},n))},e.prototype.delete=function(t,e){return void 0===e&&(e={}),this.request(o({method:"delete",url:t},e))},e.prototype.request=function(i){return t(this,void 0,void 0,function(){var e,n,o;return r(this,function(t){switch(t.label){case 0:return e=this.createConfig(i),[4,this.axios.request(e)];case 1:return n=t.sent(),[4,this.persistResponseData(n,e)];case 2:return o=t.sent(),[2,new s(this.model,e,n,o)]}})})},e.prototype.createConfig=function(t){return o(o(o(o({},this.config),this.model.globalApiConfig),this.model.apiConfig),t)},e.prototype.persistResponseData=function(e,n){return t(this,void 0,void 0,function(){return r(this,function(t){return n.save?void 0!==n.delete?[2,this.model.delete(n.delete)]:[2,this.model.insertOrUpdate({data:this.getDataFromResponse(e,n)})]:[2,null]})})},e.prototype.getDataFromResponse=function(t,e){return e.dataKey?t.data[e.dataKey]:t.data},e);function e(t){this.config={save:!0},this.model=t,this.registerActions()}var i=(u.prototype.plugin=function(){!function(t,e){t.axios=e.axios||null,t.globalApiConfig=e,t.apiConfig={},t.setAxios=function(t){this.axios=t},t.api=function(){return new n(this)}}(this.model,this.config)},u);function u(t,e){this.model=t.Model,this.config=e}return{install:function(t,e){new i(t,e).plugin()}}});